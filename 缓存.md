
## 缓存

### 强缓存和协商缓存
两者的主要区别是使用本地缓存的时候，是否需要向服务器验证本地缓存是否依旧有效。协商缓存，就是需要和服务器进行协商，最终确定是否使用本地缓存。  

### 强缓存
强缓存主要通过http请求头中的Cache-Control和Expire两个字段控制。Expire是HTTP1.0标准下的字段，重点来讨论Cache-Control这个字段。  
我们设置Cache-Control的值"public,max-age=XXX"，表示xx秒内再次访问资源，均使用本地的缓存，不再向服务器发起请求。  

如果xxx秒内，服务器上面的资源更新了，客户端在没有强制刷新的情况下，看到的内容还是旧的。  
### 协商缓存
协商缓存最大的问题就是每次都要向服务器验证一下缓存的有效性，会浪费带宽  

### 最佳实践
缓存的意义就在于减少请求，更多的使用本地资源，给用户更好的体验的同时，也减轻服务器压力。所以，最佳实践，就应该尽可能命中强缓存，同时，能在更新版本的时候让客户端的缓存失效。  

在更新版本之后，如何让用户第一时间使用最新的资源文件呢？机智的前端们想出了一个方法，在更新版本的时候，顺便把静态资源的路径改了，这样，就相当于第一次访问这些资源，就不会存在缓存的问题了  

综上所述，我们可以得出一个较为合理的缓存方案：  
* HTML：使用协商缓存。  
* CSS&JS&图片： 使用强缓存，文件名称带上hash值。  

### 哈希也有讲究
webpack给我们提供了三种哈希值计算方式，分别是hash、chunkhash、contenthash。  


### ETag与last-modified谁优先
协商缓存，有Etag和last-modified两个字段，那么当两个字段同在的时候，会优先以哪一个为准呢？ 